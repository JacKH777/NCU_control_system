import serial
import time

ser_1 = serial.Serial("COM8", 115200)
controller_u_output = 0
triangle_angle = [0,120,240,361,481,601,721,842,962,1082,1202,1323,1443,1563,1683,1804,1924,2044,2164,2285,2405,2525,2645,2766,2886,3006,3126,3246,3367,3487,3607,3727,3848,3968,4088,4208,4329,4449,4569,4689,4810,4930,5050,5170,5291,5411,5531,5651,5772,5892,6012,6132,6253,6373,6493,6613,6733,6854,6974,7094,7214,7335,7455,7575,7695,7816,7936,8056,8176,8297,8417,8537,8657,8778,8898,9018,9138,9259,9379,9499,9619,9739,9860,9980,10100,10220,10341,10461,10581,10701,10822,10942,11062,11182,11303,11423,11543,11663,11784,11904,12024,12144,12265,12385,12505,12625,12745,12866,12986,13106,13226,13347,13467,13587,13707,13828,13948,14068,14188,14309,14429,14549,14669,14790,14910,15030,15150,15271,15391,15511,15631,15752,15872,15992,16112,16232,16353,16473,16593,16713,16834,16954,17074,17194,17315,17435,17555,17675,17796,17916,18036,18156,18277,18397,18517,18637,18758,18878,18998,19118,19238,19359,19479,19599,19719,19840,19960,20080,20200,20321,20441,20561,20681,20802,20922,21042,21162,21283,21403,21523,21643,21764,21884,22004,22124,22244,22365,22485,22605,22725,22846,22966,23086,23206,23327,23447,23567,23687,23808,23928,24048,24168,24289,24409,24529,24649,24770,24890,25010,25130,25251,25371,25491,25611,25731,25852,25972,26092,26212,26333,26453,26573,26693,26814,26934,27054,27174,27295,27415,27535,27655,27776,27896,28016,28136,28257,28377,28497,28617,28737,28858,28978,29098,29218,29339,29459,29579,29699,29820,29940,29940,29820,29699,29579,29459,29339,29218,29098,28978,28858,28737,28617,28497,28377,28257,28136,28016,27896,27776,27655,27535,27415,27295,27174,27054,26934,26814,26693,26573,26453,26333,26212,26092,25972,25852,25731,25611,25491,25371,25251,25130,25010,24890,24770,24649,24529,24409,24289,24168,24048,23928,23808,23687,23567,23447,23327,23206,23086,22966,22846,22725,22605,22485,22365,22244,22124,22004,21884,21764,21643,21523,21403,21283,21162,21042,20922,20802,20681,20561,20441,20321,20200,20080,19960,19840,19719,19599,19479,19359,19238,19118,18998,18878,18758,18637,18517,18397,18277,18156,18036,17916,17796,17675,17555,17435,17315,17194,17074,16954,16834,16713,16593,16473,16353,16232,16112,15992,15872,15752,15631,15511,15391,15271,15150,15030,14910,14790,14669,14549,14429,14309,14188,14068,13948,13828,13707,13587,13467,13347,13226,13106,12986,12866,12745,12625,12505,12385,12265,12144,12024,11904,11784,11663,11543,11423,11303,11182,11062,10942,10822,10701,10581,10461,10341,10220,10100,9980,9860,9739,9619,9499,9379,9259,9138,9018,8898,8778,8657,8537,8417,8297,8176,8056,7936,7816,7695,7575,7455,7335,7214,7094,6974,6854,6733,6613,6493,6373,6253,6132,6012,5892,5772,5651,5531,5411,5291,5170,5050,4930,4810,4689,4569,4449,4329,4208,4088,3968,3848,3727,3607,3487,3367,3246,3126,3006,2886,2766,2645,2525,2405,2285,2164,2044,1924,1804,1683,1563,1443,1323,1202,1082,962,842,721,601,481,361,240,120,0]
triangle_angle_0_255 = [0,2,4,6,8,10,12,14,16,18,20,22,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,256,258,260,262,264,266,268,270,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,303,305,307,309,311,313,315,317,319,321,323,325,327,329,331,333,335,337,339,341,343,345,347,350,352,354,356,358,360,362,364,366,368,370,372,374,376,378,380,382,384,386,388,390,392,395,397,399,401,403,405,407,409,411,413,415,417,419,421,423,425,427,429,431,433,435,437,439,442,444,446,448,450,452,454,456,458,460,462,464,466,468,470,472,474,476,478,480,482,484,486,489,491,493,495,497,499,501,503,505,507,509,509,507,505,503,501,499,497,495,493,491,489,486,484,482,480,478,476,474,472,470,468,466,464,462,460,458,456,454,452,450,448,446,444,442,439,437,435,433,431,429,427,425,423,421,419,417,415,413,411,409,407,405,403,401,399,397,395,392,390,388,386,384,382,380,378,376,374,372,370,368,366,364,362,360,358,356,354,352,350,347,345,343,341,339,337,335,333,331,329,327,325,323,321,319,317,315,313,311,309,307,305,303,300,298,296,294,292,290,288,286,284,282,280,278,276,274,272,270,268,266,264,262,260,258,256,253,251,249,247,245,243,241,239,237,235,233,231,229,227,225,223,221,219,217,215,213,211,208,206,204,202,200,198,196,194,192,190,188,186,184,182,180,178,176,174,172,170,168,166,164,161,159,157,155,153,151,149,147,145,143,141,139,137,135,133,131,129,127,125,123,121,119,117,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31,29,27,25,22,20,18,16,14,12,10,8,6,4,2,0]
i = 0
while True:
    if i == 500:
        i=0
    controller_u_output = triangle_angle[i]
    ser_1.write(controller_u_output.to_bytes(2, byteorder='big'))
    i = i+1
    time.sleep(1/50)

ser_1.write(controller_u_output.to_bytes(2, byteorder='big'))